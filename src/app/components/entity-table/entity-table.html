<p-table 
  #entityTable stripedRows showGridlines [value]="data" dataKey="id" [rows]="10" [columns]="fieldList" [reorderableColumns]="true" size="small"
  [rowsPerPageOptions]="[10, 20, 50, 100]" [loading]="loading" [paginator]="true"
  [tableStyle]="{ 'min-width': '100%' }" [scrollable]="true"
  >
  <!-- [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']" -->
  <!-- <ng-template #caption>
            <div class="flex">
              <p-iconfield iconPosition="left" class="ml-auto">
                <p-inputicon>
                  <i class="pi pi-search"></i>
                </p-inputicon>
                <input pInputText type="text" (input)="dt2.filterGlobal($event.target.value, 'contains')"
                  placeholder="Search keyword" />
              </p-iconfield>
            </div>
          </ng-template> -->
  <!-- <ng-template #caption>
    <p-multiselect display="chip" [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header"
      selectedItemsLabel="{0} columns selected" [style]="{ 'min-width': '200px' }" placeholder="Choose Columns" />
  </ng-template> -->
  <ng-template #header let-columns>
    <tr>
      <th style="border-right: 1px solid rgba(0,0,0,.2); width: 50px;" pFrozenColumn>&nbsp;</th>
      @for (_col of columns; track _col.name) {
        <!-- <th *ngFor="let col of fieldList" pReorderableColumn>{{col.name}}</th> -->
        <th pReorderableColumn [pSortableColumn]="_col.name">
          <p-sortIcon [field]="_col.name" />
          {{_col.description || _col.name}}
          <!-- <p-columnFilter type="text" [field]="_col.name" placeholder="Type to Search" ariaLabel="Filter" filterOn="input"></p-columnFilter> -->
        </th>
      }
    </tr>
  </ng-template>
  <!-- <ng-template #header>
    <tr>
      <th style="width:22%">Name</th>
      <th style="width:22%">Country</th>
      <th style="width:22%">Agent</th>
      <th style="width:22%">Status</th>
      <th style="width:12%">Verified</th>
    </tr>
    <tr>
      <th>
        <p-columnFilter type="text" field="name" placeholder="Type to search" ariaLabel="Filter Name"
          filterOn="input"></p-columnFilter>
      </th>
      <th>
        <p-columnFilter type="text" field="country.name" placeholder="Enter key to search"
          ariaLabel="Filter Country"></p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="representative" matchMode="in" [showMenu]="false">
          <ng-template #filter let-value let-filter="filterCallback">
            <p-multiselect [options]="representatives" placeholder="Any" (onChange)="filter($event.value)"
              optionLabel="name" style="min-width: 14rem" [panelStyle]="{ minWidth: '16rem' }">
              <ng-template let-option #item>
                <div class="flex items-center gap-2">
                  <img [alt]="option.label"
                    src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{ option.image }}"
                    style="width: 32px" />
                  <span>{{ option.name }}</span>
                </div>
              </ng-template>
            </p-multiselect>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="status" matchMode="equals" [showMenu]="false">
          <ng-template #filter let-value let-filter="filterCallback">
            <p-select [(ngModel)]="value" [options]="statuses" (onChange)="filter($event.value)"
                      placeholder="Select One" [showClear]="true" style="min-width: 12rem">
                      <ng-template let-option #item>
                        <p-tag [value]="option.value" [severity]="getSeverity(option.value)" />
                      </ng-template>
                    </p-select>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>
        <p-columnFilter type="boolean" field="verified"></p-columnFilter>
      </th>
    </tr>
  </ng-template> -->
  <ng-template #body let-dataEntry>
    <tr>
      <td pFrozenColumn class="flex flex-row items-center justify-end" style="border-right: 1px solid rgba(0,0,0,.2);">
        <p-buttongroup>
          <p-button outlined size="small" icon="pi pi-eye"  />
          <p-button outlined size="small" icon="pi pi-pen-to-square"  />
          <p-button outlined size="small" icon="pi pi-clone" />
          <p-button outlined size="small" icon="pi pi-trash" severity="danger" />
        </p-buttongroup>
      </td>
      @for (_col of this.fieldList; track _col.name) {
        <td>
          {{ dataEntry[_col.name] }}
        </td>
      }
      <!-- <td>
        {{ customer.name }}
      </td>
      <td>
        <div class="flex items-center gap-2">
          <img src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
            [class]="'flag flag-' + customer.country.code" style="width: 20px" />
          <span>{{ customer.country.name }}</span>
        </div>
      </td>
      <td>
        <div class="flex items-center gap-2">
          <img [alt]="customer.representative.name"
            src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{ customer.representative.image }}" width="32"
            style="vertical-align: middle" />
          <span>{{ customer.representative.name }}</span>
        </div>
      </td>
      <td>
        <p-tag [value]="customer.status" [severity]="getSeverity(customer.status)" />
      </td>
      <td>
        <i class="pi"
          [ngClass]="{ 'text-green-500 pi-check-circle': customer.verified, 'text-red-500 pi-times-circle': !customer.verified }"></i>
      </td> -->
    </tr>
  </ng-template>
  <ng-template #emptymessage>
    <tr>
      <td colspan="5">No data found.</td>
    </tr>
  </ng-template>
</p-table>